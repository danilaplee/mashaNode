/*!
 * flowplayer.js 3.2.4. The Flowplayer API
 * 
 * Copyright 2009 Flowplayer Oy
 * 
 * This file is part of Flowplayer.
 * 
 * Flowplayer is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * Flowplayer is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with Flowplayer.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * Date: 2010-08-25 12:48:46 +0000 (Wed, 25 Aug 2010)
 * Revision: 551 forked
 */
(function(){"use strict";var b=[];var e;function h(p){if(typeof window.console!=="undefined"){window.console.log([].slice.call(p))
}}function l(r){if(!r||typeof r!=="object"){return r}var p=new r.constructor();var q;for(q in r){if(r.hasOwnProperty(q)){p[q]=l(r[q])
}}return p}function n(u,r){if(!u){return}var p,q=0,s=u.length,t;if(s===e){for(p in u){if(r.call(u[p],p,u[p])===false){break
}}}else{for(t=u[0];q<s&&r.call(t,q,t)!==false;t=u[++q]){}}return u}function c(p){return document.getElementById(p)
}function k(r,q,p){if(typeof q!=="object"){return r}if(r&&q){n(q,function(s,t){if(!p||typeof t!=="function"){r[s]=t
}})}return r}function o(t){var r=t.indexOf(".");if(r!==-1){var q=t.slice(0,r)||"*";var p=t.slice(r+1,t.length);
var s=[];n(document.getElementsByTagName(q),function(){if(this.className&&this.className.indexOf(p)!==-1){s.push(this)
}});return s}}function g(p){p=p||window.event;if(p.preventDefault){p.stopPropagation();p.preventDefault()
}else{p.returnValue=false;p.cancelBubble=true}return false}function j(r,p,q){r[p]=r[p]||[];r[p].push(q)
}function f(){return"_"+(""+Math.random()).slice(2,10)}var i=function(u,s,t){var r=this,q={},v={};r.index=s;
if(typeof u==="string"){u={url:u}}k(this,u,true);n(("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop,MetaData").split(","),function(x,w){w="on"+w;
var y;if(w.indexOf("*")!==-1){w=w.slice(0,w.length-1);y="onBefore"+w.slice(2);r[y]=function(z){j(v,y,z);
return r}}r[w]=function(z){j(v,w,z);return r};if(s===-1){if(y&&r[y]){t[y]=r[y]}if(r[w]){t[w]=r[w]}}});
k(this,{onCuepoint:function(y,x){if(arguments.length===1){q.embedded=[null,y];return r}if(typeof y==="number"){y=[y]
}var w=f();q[w]=[y,x];if(t.isLoaded()){t._api().fp_addCuepoints(y,s,w)}return r},update:function(x){k(r,x);
if(t.isLoaded()){t._api().fp_updateClip(x,s)}var w=t.getConfig();var y=(s===-1)?w.clip:w.playlist[s];
k(y,x,true)},_fireEvent:function(w,z,x,B){if(w==="onLoad"){n(q,function(C,D){if(D[0]){t._api().fp_addCuepoints(D[0],s,C)
}});return false}B=B||r;if(w==="onCuepoint"){var A=q[z];if(A){return A[1].call(t,B,x)}}if(z&&"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(w)!==-1){k(B,z);
if(z.metaData){if(!B.duration){B.duration=z.metaData.duration}else{B.fullDuration=z.metaData.duration
}}}var y=true;n(v[w],function(C,D){y=D.call(t,B,z,x)});return y}});if(u.onCuepoint){var p=u.onCuepoint;
r.onCuepoint.apply(r,typeof p==="function"?[p]:p);delete u.onCuepoint}n(u,function(w,x){if(typeof x==="function"){j(v,w,x);
delete u[w]}});if(s===-1){t.onCuepoint=this.onCuepoint}};var m=function(q,s,r,u){var p=this,t={},v=false;
if(u){k(t,u)}n(s,function(w,x){if(typeof x==="function"){t[w]=x;delete s[w]}});k(this,{animate:function(z,A,y){var x,w;
if(!z){return p}if(typeof A==="function"){y=A;A=500}if(typeof z==="string"){x=z;z={};z[x]=A;A=500}if(y){w=f();
t[w]=y}if(A===e){A=500}s=r._api().fp_animate(q,z,A,w);return p},css:function(x,y){if(y!==e){var w={};
w[x]=y;x=w}s=r._api().fp_css(q,x);k(p,s);return p},show:function(){this.display="block";r._api().fp_showPlugin(q);
return p},hide:function(){this.display="none";r._api().fp_hidePlugin(q);return p},toggle:function(){this.display=r._api().fp_togglePlugin(q);
return p},fadeTo:function(z,y,x){var w;if(typeof y==="function"){x=y;y=500}if(x){w=f();t[w]=x}this.display=r._api().fp_fadeTo(q,z,y,w);
this.opacity=z;return p},fadeIn:function(x,w){return p.fadeTo(1,x,w)},fadeOut:function(x,w){return p.fadeTo(0,x,w)
},getName:function(){return q},getPlayer:function(){return r},_fireEvent:function(x,w,y){if(x==="onUpdate"){var A=r._api().fp_getPlugin(q);
if(!A){return}k(p,A);delete p.methods;if(!v){n(A.methods,function(C,D){D=""+D;p[D]=function(){var E=[].slice.call(arguments);
var F=r._api().fp_invoke(q,D,E);return F==="undefined"||F===e?p:F}});v=true}}var B=t[x];if(B){var z=B.apply(p,w);
if(x.slice(0,1)==="_"){delete t[x]}return z}return p}})};function a(s,J,v){var z=this,y=null,G=false,K,p,x,w,u,I=[],B={},A={},H,t,r,F,q,D;
k(z,{id:function(){return H},isLoaded:function(){return(y!==null&&y.fp_play!==e&&!G)},getParent:function(){return s
},hide:function(L){if(L){s.style.height="0px"}if(z.isLoaded()){y.style.height="0px"}return z},show:function(){s.style.height=D+"px";
if(z.isLoaded()){y.style.height=q+"px"}return z},isHidden:function(){return z.isLoaded()&&parseInt(y.style.height,10)===0
},load:function(N){if(!z.isLoaded()&&z._fireEvent("onBeforeLoad")!==false){var L=function(){w=s.innerHTML;
if(w&&!window.flashembed.isSupported(J.version)){s.innerHTML=""}if(N){N.cached=true;j(A,"onLoad",N)}window.flashembed(s,J,{config:v})
};var M=0;n(b,function(P,O){if(!O){if(++M===b.length){L()}return}O.unload(function(Q){if(++M===b.length){L()
}})})}return z},unload:function(N){if(this.isFullscreen()&&/WebKit/i.test(navigator.userAgent)){if(N){N(false)
}return z}if(w.replace(/\s/g,"")!==""){if(z._fireEvent("onBeforeUnload")===false){if(N){N(false)}return z
}G=true;try{if(y){y.fp_close();z._fireEvent("onUnload")}}catch(L){}var M=function(){x=null;y=null;s.innerHTML=w;
G=false;if(N){N(true)}};x=setTimeout(M,50)}else{if(N){N(false)}}return z},destroy:function(){if(!v){return
}var L;clearTimeout(K);K=null;clearTimeout(p);p=null;clearTimeout(x);x=null;y=null;b[r]=null;for(L=0;
L<b.length;++L){if(b[L]){break}}if(L>=b.length){b.length=0}G=false;w=null;u=null;I=null;B=null;A=null;
H=null;t=null;for(L in z){if(z.hasOwnProperty(L)){delete z[L]}}L=null;z=null;v=null;J=null;s=null},getClip:function(L){if(L===e){L=F
}return I[L]},getCommonClip:function(){return u},getPlaylist:function(){return I},getPlugin:function(L){var N=B[L];
if(!N&&z.isLoaded()){var M=z._api().fp_getPlugin(L);if(M){N=new m(L,M,z);B[L]=N}}return N},getScreen:function(){return z.getPlugin("screen")
},getControls:function(){return z.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return z.getPlugin("logo")._fireEvent("onUpdate")
}catch(L){}},getPlay:function(){return z.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(L){return L?l(v):v
},getFlashParams:function(){return J},loadPlugin:function(O,N,Q,P){if(typeof Q==="function"){P=Q;Q={}
}var M=P?f():"_";z._api().fp_loadPlugin(O,N,Q,M);var L={};L[M]=P;var R=new m(O,null,z,L);B[O]=R;return R
},getState:function(){return z.isLoaded()?y.fp_getState():-1},play:function(M,L){var N=function(){if(M!==e){z._api().fp_play(M,L)
}else{z._api().fp_play()}};if(z.isLoaded()){N()}else{if(G){p=setTimeout(function(){z.play(M,L)},50)}else{z.load(function(){N()
})}}return z},getVersion:function(){var M="flowplayer.js 3.2.4";if(z.isLoaded()){var L=y.fp_getVersion();
L.push(M);return L}return M},_api:function(){if(!z.isLoaded()){throw"Flowplayer "+z.id()+" not loaded when calling an API method"
}return y},setClip:function(L){z.setPlaylist([L]);return z},getIndex:function(){return r},_swfHeight:function(){return y.clientHeight
}});n(("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut").split(","),function(M,L){L="on"+L;
var N;if(L.indexOf("*")!==-1){L=L.slice(0,L.length-1);N="onBefore"+L.slice(2);z[N]=function(O){j(A,N,O);
return z}}z[L]=function(O){j(A,L,O);return z}});n(("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled").split(","),function(M,L){z[L]=function(O,N){if(!v){return z
}if(!z.isLoaded()){return z}var P=null,R=y["fp_"+L];if(typeof R==="function"){try{if(O!==e&&N!==e){P=R.call(y,O,N)
}else{P=(O===e)?R.call(y):R.call(y,O)}}catch(Q){if(v.debug){h(["Flowplayer api function "+L+" has thrown an exception: "+(Q.message||Q)])
}}}else{if(v.debug){h(["Flowplayer api function "+L+" not found"])}}return P==="undefined"||P===e?z:P
}});z._fireEvent=function(U){if(!v){return}if(typeof U==="string"){U=[U]}var V=U[0],S=U[1],Q=U[2],P=U[3],O=0;
if(v.debug){h([].concat(["$f.fireEvent"],U))}if(!z.isLoaded()&&V==="onLoad"&&S==="player"){y=y||c(t);
q=z._swfHeight();n(I,function(W,X){if(!X){return}X._fireEvent("onLoad")});n(B,function(W,X){if(!X){return
}X._fireEvent("onUpdate")});u._fireEvent("onLoad")}if(V==="onLoad"&&S!=="player"){return}if(V==="onError"){if(typeof S==="string"||(typeof S==="number"&&typeof Q==="number")){S=Q;
Q=P}}if(V==="onContextMenu"){n(v.contextMenu[S],function(W,X){X.call(z)});return}if(V==="onPluginEvent"||V==="onBeforePluginEvent"){var L=S.name||S;
var M=B[L];if(M){M._fireEvent("onUpdate",S);return M._fireEvent(Q,U.slice(3))}return}if(V==="onPlaylistReplace"){I=[];
var R=0;n(S,function(W,X){I.push(new i(X,R++,z))})}if(V==="onClipAdd"){if(S.isInStream){return}S=new i(S,Q,z);
I.splice(Q,0,S);for(O=Q+1;O<I.length;O++){I[O].index++}}var T=true;if(typeof S==="number"&&S<I.length){F=S;
var N=I[S];if(N){T=N._fireEvent(V,Q,P)}if(!N||T!==false){T=u._fireEvent(V,Q,P,N)}}n(A[V],function(W,X){T=X.call(z,S,Q);
if(X.cached){A[V].splice(O,1)}if(T===false){return false}O++});return T};function E(){var N=$f(s);if(N){N.getParent().innerHTML="";
r=N.getIndex();b[r]=z}else{b.push(z);r=b.length-1}D=parseInt(s.style.height,10)||s.clientHeight;H=s.id||"fp"+f();
t=J.id||H+"_api";J.id=t;v.playerId=H;if(typeof v==="string"){v={clip:{url:v}}}if(typeof v.clip==="string"){v.clip={url:v.clip}
}v.clip=v.clip||{};if(s.getAttribute("href",2)&&!v.clip.url){v.clip.url=s.getAttribute("href",2)}u=new i(v.clip,-1,z);
v.playlist=v.playlist||[v.clip];var M=0;n(v.playlist,function(P,Q){if(typeof Q==="object"&&Q.length){Q={url:""+Q}
}n(v.clip,function(R,S){if(S!==e&&Q[R]===e&&typeof S!=="function"){Q[R]=S}});v.playlist[M]=Q;Q=new i(Q,M,z);
I.push(Q);M++});n(v,function(P,Q){if(typeof Q==="function"){if(u[P]){u[P](Q)}else{j(A,P,Q)}delete v[P]
}});n(v.plugins,function(P,Q){if(Q){B[P]=new m(P,Q,z)}});if(!v.plugins||v.plugins.controls===e){B.controls=new m("controls",null,z)
}B.canvas=new m("canvas",null,z);w=s.innerHTML;function O(Q){var P=z.hasiPadSupport&&z.hasiPadSupport();
if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(I[0].url)&&!P){return true}if(!z.isLoaded()&&z._fireEvent("onBeforeClick")!==false){z.load()
}return g(Q)}function L(){K=null;if(w.replace(/\s/g,"")!==""){if(s.addEventListener){s.addEventListener("click",O,false)
}else{if(s.attachEvent){s.attachEvent("onclick",O)}}}else{if(s.addEventListener){s.addEventListener("click",g,false)
}z.load()}}K=setTimeout(L,0)}if(!window.flashembed){throw new Error("Flowplayer requires flashembed")
}if(typeof s==="string"){var C=c(s);if(!C){throw new Error("Flowplayer cannot access element: "+s)}s=C;
E()}else{E()}}function d(p){this.length=p.length;this.each=function(q){n(p,q)};this.size=function(){return p.length
}}window.flowplayer=window.$f=function(){var q=null;var p=arguments[0];if(!arguments.length){n(b,function(w,v){if(!v){return
}if(v.isLoaded()){q=v;return false}});return q||b[0]}if(arguments.length===1){if(typeof p==="number"){return b[p]
}else{if(p==="*"){return new d(b)}n(b,function(w,v){if(!v){return}if(v.id()===p.id||v.id()===p||v.getParent()===p){q=v;
return false}});return q}}if(arguments.length>1){var u=arguments[1],r=(arguments.length===3)?arguments[2]:{};
if(typeof u==="string"){u={src:u}}u=k({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:true},u);
if(typeof p==="string"){if(p.indexOf(".")!==-1){var t=[];n(o(p),function(v,w){t.push(new a(w,l(u),l(r)))
});return new d(t)}else{var s=c(p);return new a(s!==null?s:p,u,r)}}else{if(p){return new a(p,u,r)}}}return null
};k(window.$f,{fireEvent:function(){var q=[].slice.call(arguments);var r=$f(q[0]);return r?r._fireEvent(q.slice(1)):null
},addPlugin:function(p,q){a.prototype[p]=q;return $f},each:n,extend:k});if(typeof jQuery==="function"){jQuery.fn.flowplayer=function(r,q){if(!arguments.length||typeof arguments[0]==="number"){var p=[];
this.each(function(){var s=$f(this);if(s){p.push(s)}});return arguments.length?p[arguments[0]]:new d(p)
}return this.each(function(){$f(this,l(r),q?l(q):{})})}}}());