/*!
 * jQuery Notify UI Widget 1.4
 * Copyright (c) 2010 Eric Hynds
 *
 * http://www.erichynds.com/jquery/a-jquery-ui-growl-ubuntu-notification-widget/
 *
 * Depends:
 *   - jQuery 1.4
 *   - jQuery UI 1.8 widget factory
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */
(function(a){a.widget("ech.notify",{options:{speed:500,expires:5000,stack:"below",custom:false},_create:function(){var b=this;
this.templates={};this.keys=[];this.element.addClass("ui-notify").children().addClass("ui-notify-message ui-notify-message-style").each(function(d){var c=this.id||d;
b.keys.push(c);b.templates[c]=a(this).removeAttr("id").wrap("<div></div>").parent().html()}).end().empty().show()
},create:function(c,e,d){if(typeof c==="object"){d=e;e=c;c=null}var b=this.templates[c||this.keys[0]];
if(d&&d.custom){b=a(b).removeClass("ui-notify-message-style").wrap("<div></div>").parent().html()}return new a.ech.notify.instance(this)._create(e,a.extend({},this.options,d),b)
}});a.extend(a.ech.notify,{instance:function(b){this.parent=b;this.isOpen=false}});a.extend(a.ech.notify.instance.prototype,{_create:function(h,e,g){this.options=e;
var d=this,f=g.replace(/#(?:\{|%7B)(.*?)(?:\}|%7D)/g,function(i,j){return(j in h)?h[j]:""}),c=(this.element=a(f)),b=c.find(".ui-notify-close");
if(typeof this.options.click==="function"){c.addClass("ui-notify-click").bind("click",function(i){d._trigger("click",i,d)
})}if(b.length){b.bind("click",function(){d.close();return false})}this.open();if(typeof e.expires==="number"){window.setTimeout(function(){d.close()
},e.expires)}return this},close:function(){var b=this,c=this.options.speed;this.element.fadeTo(c,0).slideUp(c,function(){b._trigger("close");
b.isOpen=false});return this},open:function(){if(this.isOpen||this._trigger("beforeopen")===false){return this
}var b=this;this.element[this.options.stack==="above"?"prependTo":"appendTo"](this.parent.element).css({display:"none",opacity:""}).fadeIn(this.options.speed,function(){b._trigger("open");
b.isOpen=true});return this},widget:function(){return this.element},_trigger:function(c,d,b){return this.parent._trigger.call(this,c,d,b)
}})})(jQuery);
