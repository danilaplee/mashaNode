(function(d,f,a){"use strict";var b=f.$,h=e,g=h.prototype,c="ivideon.views.SocialButtons",i=c;f.provide(c,h);function e(j){f.utils.assertArg(c,{options:j,"options.container":j});var k=this;k._options=f.optClass(h.defaults,j,c,k,{$container:"container"});
k.$wrapper=b('<div class="iv-social-buttons m-size-'+k._options.buttonSize+'" />');k._renderButtons();k.$wrapper.appendTo(k.$container);k._setState(h.STATE_CREATED)}h.STATE_CREATED=1;h.STATE_VISIBLE=2;
h.STATE_DESTROYED=3;h.defaults={buttonSize:24};h.defaultWindowOptions={target:"_blank",options:""};g._renderButtons=function(){var o=this,n=o._options.buttons,l,j,m;o.$wrapper.empty();for(j=n.length,l=0;
l<j;++l){m=n[l];var k={service:m,isClicked:false};o.$wrapper.append(b('<span class="b-social-button m-'+m+'" />').attr("title",f.tr(i,"buttons."+m)).on("click",k,b.proxy(o._onShareClick,o)))}};g.getShareOptions=function(){var k=this,j=k._options;
return{url:(j.url===a?d.location.href:j.url),title:(j.title===a?d.document.title:j.title),preview:(j.preview===a?"":j.preview)}};g._onShareClick=function(k){var n=this,l=k.data,j=(l&&l.service),m;if(l&&!l.isClicked){l.isClicked=true;
f.trackEvent({category:"Share",action:j})}if(n._state===h.STATE_DESTROYED){return}k.preventDefault();if(!j||typeof n.buttonLibrary[j]!=="function"){return}m=n.buttonLibrary[j](n.getShareOptions());if(!m||!m.url){return
}m=f.optMerge(h.defaultWindowOptions,m);f.utils.windowOpen(m.url,m.target,m.options,c+"#_onShareClick "+j)};g.buttonLibrary={facebook:function(j){return{url:"http://www.facebook.com/sharer.php?u="+encodeURIComponent(j.url)+(j.title?"&t="+encodeURIComponent(j.title):""),options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=600, height=440, toolbar=0, status=0"}
},twitter:function(j){return{url:"http://twitter.com/share?url="+encodeURIComponent(j.url)+(j.title?"&text="+encodeURIComponent(j.title):""),options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=550, height=440, toolbar=0, status=0"}
},linkedin:function(j){return{url:"http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(j.url)+(j.title?"&title="+encodeURIComponent(j.title):"")}},google_plus:function(j){return{url:"https://plusone.google.com/_/+1/confirm?url="+encodeURIComponent(j.url),options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=550, height=440, toolbar=0, status=0"}
},tumblr:function(j){return{url:"http://www.tumblr.com/share?v=3&u="+encodeURIComponent(j.url)+(j.title?"&t="+encodeURIComponent(j.title):"")}},stumbleupon:function(j){return{url:"http://www.stumbleupon.com/submit?url="+encodeURIComponent(j.url)+(j.title?"&title="+encodeURIComponent(j.title):"")}
},vkontakte:function(j){return{url:"http://vk.com/share.php?url="+encodeURIComponent(j.url),options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=554, height=421, toolbar=0, status=0"}
},odnoklassniki:function(j){return{url:"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+encodeURIComponent(j.url)+(j.title?"&title="+encodeURIComponent(j.title):""),options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=550, height=440, toolbar=0, status=0"}
},mail_ru:function(j){return{url:"http://connect.mail.ru/share?url="+encodeURIComponent(j.url)+(j.title?"&title="+encodeURIComponent(j.title):"")}},weibo:function(j){return{url:"http://service.weibo.com/share/share.php?url="+encodeURIComponent(j.url)+(j.title?"&title="+encodeURIComponent(j.title.replace(/"/g,"")):"")+"&pic="+encodeURIComponent(j.preview)+"&language=&dpc=1",options:"scrollbars=0, resizable=1, menubar=0, left=200, top=200, width=550, height=440, toolbar=0, status=0"}
}};g.show=function(){var j=this;if(j._state===h.STATE_DESTROYED){return}j._setState(h.STATE_VISIBLE);j.$wrapper.show()};g.destroy=function(){var k=this,j;if(k._state===h.STATE_DESTROYED){return}k._setState(h.STATE_DESTROYED);
k.$wrapper.remove();for(j in k){if(j.charAt(0)==="$"){delete k[j]}}};g._setState=function(j){var k=this;if(!j){throw new f.utils.ArgumentError(c+'#_setState: Argument "state" not set.')}if(k._state===h.STATE_DESTROYED){return
}k._state=j};g.setIconSize=function(j){var k=this;k.$wrapper.removeClass("m-size-"+k._options.buttonSize).addClass("m-size-"+j);k._options.buttonSize=j}}(window,window._ivideon));