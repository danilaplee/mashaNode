/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(g,j){function r(b){if(p===""||p===false)return b;b=b.charAt(0).toUpperCase()+b.substr(1);return p+b}var f=Math,D=j.createElement("div").style,p=function(){var b="MozT,webkitT,msT,OT,t".split(","),a,c,d=b.length;for(c=0;c<d;c++){a=b[c]+"ransform";if(a in D)return b[c].substr(0,b[c].length-1)}return false}(),o=p?"-"+p.toLowerCase()+"-":"",s=r("transform"),L=r("transitionProperty"),u=r("transitionDuration"),M=r("transformOrigin"),N=r("transitionTimingFunction"),E=r("transitionDelay"),F=/android/gi.test(navigator.appVersion),
H=/iphone|ipod|ipad/gi.test(navigator.appVersion),x=/hp-tablet/gi.test(navigator.appVersion),l=/msie [0-9]+\./i.test(navigator.appVersion)&&j.documentMode<=8,I=r("perspective")in D,k="ontouchstart"in g&&!x,J=!!p,O=r("transition")in D,G="onorientationchange"in g?"orientationchange":"resize",w=k?"touchstart":"mousedown",y=k?"touchmove":"mousemove",z=k?"touchend":"mouseup",A=k?"touchcancel":"mouseup",B=p==="Moz"?"DOMMouseScroll":"mousewheel",v;v=p===false?false:{"":"transitionend",webkit:"webkitTransitionEnd",
Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[p];var P=function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(b){return setTimeout(b,1)}}(),K=g.cancelRequestAnimationFrame||g.webkitCancelAnimationFrame||g.webkitCancelRequestAnimationFrame||g.mozCancelRequestAnimationFrame||g.oCancelRequestAnimationFrame||g.msCancelRequestAnimationFrame||clearTimeout,t=I?" translateZ(0)":"",C=
Date.now||function(){return(new Date).valueOf()};x=function(b,a){var c=this,d;c.wrapper=typeof b==="object"?b:j.getElementById(b);c._wrapperCssInitial=c.wrapper.style.cssText;c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c._handleEventWithContext=function(e){c.handleEvent(e||g.event)};if(!k)c._preventSelectionScrollHandler=function(e){e=l?c._fixEvent(e):e;c._isInputEvent(e)||e.preventDefault()};c.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,
lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,handleDrag:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:F,hideScrollbar:H,fadeScrollbar:H&&I,scrollbarClass:"",pointerEvents:false,zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",wheelDeltaX:10,wheelDeltaY:10,snap:false,snapThreshold:1,onRefresh:null,onAfterRefresh:null,onBeforeScrollStart:function(e){/^touch/.test(e.type)&&e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,
onScrollMove:null,onScrollPositionChanged:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(d in a)c.options[d]=a[d];c.x=c.options.x;c.y=c.options.y;c.options.useTransform=J&&c.options.useTransform;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=c.options.useTransform&&c.options.zoom;c.options.useTransition=O&&c.options.useTransition;if(c.options.zoom&&
F)t="";c._scrollerCssInitial=c.scroller.style.cssText;c.scroller.style[L]=c.options.useTransform?o+"transform":"top left";c.scroller.style[u]="0";c.scroller.style[M]="0 0";if(c.options.useTransition)c.scroller.style[N]="cubic-bezier(0.33,0.66,0.66,1)";if(c.options.useTransform)c.scroller.style[s]="translate("+c.x+"px,"+c.y+"px)"+t;else c.scroller.style.cssText+=";position:absolute;top:"+c.y+"px;left:"+c.x+"px";if(c.options.useTransition)c.options.fixedScrollbar=true;c.refresh();c._bind(G,g);if(c.options.handleDrag){c._bind(w,
c.wrapper,undefined,c._preventSelectionScrollHandler);c._bind(w);c._bind("selectstart");c._bind("dragstart")}k||c.options.wheelAction!=="none"&&c._bind(B);if(c.options.checkDOMChanges)c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500)};x.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){var a;b=l?this._fixEvent(b):b;if(b.target)if(!((b.type===w||b.type==="selectstart")&&this._isInputEvent(b)))switch(b.type){case w:if(!k&&
b.which!==1)break;this._start(b);break;case y:this._move(b);break;case z:case A:this._end(b);break;case G:this._resize();break;case B:this._wheel(b);break;case v:this._transitionEnd(b);break;case "mouseout":a=b.relatedTarget||b.toElement;if(!a||a.nodeName=="HTML")this._end(b);break;case "selectstart":case "dragstart":b.preventDefault()}},_fixEvent:function(b){var a,c,d;c={};for(a in b)c[a]=b[a];if(!c.target)c.target=b.srcElement||j;if(c.target.nodeType===3)c.target=c.target.parentNode;a=b.button;
if(!c.which&&a!==undefined)c.which=a&1?1:a&2?3:a&4?2:0;if(c.pageX==null&&b.clientX!=null){d=c.target.ownerDocument||j;a=d.documentElement;d=d.body;c.pageX=b.clientX+(a&&a.scrollLeft||d&&d.scrollLeft||0)-(a&&a.clientLeft||d&&d.clientLeft||0);c.pageY=b.clientY+(a&&a.scrollTop||d&&d.scrollTop||0)-(a&&a.clientTop||d&&d.clientTop||0)}c.stopPropagation=function(){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=true};c.preventDefault=function(){if(b.preventDefault)b.preventDefault();else b.returnValue=
false};return c},_isInputEvent:function(b){for(b=b.target;b;){if(b.nodeName==="INPUT"||b.nodeName==="TEXTAREA"||b.nodeName==="BUTTON")return true;b=b.parentNode}return false},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(b){var a;if(this[b+"Scrollbar"]){if(!this[b+"ScrollbarWrapper"]){a=j.createElement("div");if(this.options.scrollbarClass)a.className=
this.options.scrollbarClass+b.toUpperCase();else a.style.cssText="position:absolute;z-index:100;"+(b==="h"?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px");a.style.cssText+=";"+(!this.options.pointerEvents?"pointer-events:none;":"")+o+"transition-property:opacity;"+o+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(a);
this[b+"ScrollbarWrapper"]=a;k||this.options.wheelAction!=="none"&&this._bind(B,this[b+"ScrollbarWrapper"]);a=j.createElement("div");if(!this.options.scrollbarClass)a.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+o+"background-clip:padding-box;"+o+"box-sizing:border-box;"+(b==="h"?"height:100%":"width:100%")+";"+o+"border-radius:3px;border-radius:3px";a.style.cssText+=";"+(!this.options.pointerEvents?"pointer-events:none;":"")+o+"transition-property:"+
o+"transform;"+o+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+o+"transition-duration:0;"+o+"transform: translate(0,0)"+t;if(this.options.useTransition)a.style.cssText+=";"+o+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";this[b+"ScrollbarWrapper"].appendChild(a);this[b+"ScrollbarIndicator"]=a}if(b==="h"){this.hScrollbarSize=this.hScrollbarWrapper.clientWidth;this.hScrollbarIndicatorSize=f.max(f.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8);this.hScrollbarIndicator.style.width=
this.hScrollbarIndicatorSize+"px";this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize;this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX}else{this.vScrollbarSize=this.vScrollbarWrapper.clientHeight;this.vScrollbarIndicatorSize=f.max(f.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8);this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px";this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize;this.vScrollbarProp=this.vScrollbarMaxScroll/
this.maxScrollY}this._scrollbarPos(b,true)}else if(this[b+"ScrollbarWrapper"]){k||this.options.wheelAction!=="none"&&this._unbind(B,this[b+"ScrollbarWrapper"]);if(J)this[b+"ScrollbarIndicator"].style[s]="";this[b+"ScrollbarWrapper"].parentNode.removeChild(this[b+"ScrollbarWrapper"]);this[b+"ScrollbarWrapper"]=null;this[b+"ScrollbarIndicator"]=null}},_resize:function(){var b=this;setTimeout(function(){b.refresh()},F?200:0)},_pos:function(b,a){if(!this.zoomed){b=this.hScroll?b:0;a=this.vScroll?a:0;
if(this.options.useTransform)this.scroller.style[s]="translate("+b+"px,"+a+"px) scale("+this.scale+")"+t;else{b=f.round(b);a=f.round(a);this.scroller.style.left=b+"px";this.scroller.style.top=a+"px"}this.x=b;this.y=a;this._scrollbarPos("h");this._scrollbarPos("v");this.options.onScrollPositionChanged&&this.options.onScrollPositionChanged.call(this)}},_scrollbarPos:function(b,a){var c=b==="h"?this.x:this.y;if(this[b+"Scrollbar"]){c*=this[b+"ScrollbarProp"];if(c<0){if(!this.options.fixedScrollbar){c=
this[b+"ScrollbarIndicatorSize"]+f.round(c*3);if(c<8)c=8;this[b+"ScrollbarIndicator"].style[b==="h"?"width":"height"]=c+"px"}c=0}else if(c>this[b+"ScrollbarMaxScroll"])if(this.options.fixedScrollbar)c=this[b+"ScrollbarMaxScroll"];else{c=this[b+"ScrollbarIndicatorSize"]-f.round((c-this[b+"ScrollbarMaxScroll"])*3);if(c<8)c=8;this[b+"ScrollbarIndicator"].style[b==="h"?"width":"height"]=c+"px";c=this[b+"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-c)}if(this.options.useTransition)this[b+"ScrollbarWrapper"].style[E]=
"0";this[b+"ScrollbarWrapper"].style.opacity=a&&this.options.hideScrollbar?"0":"1";if(this.options.useTransform)this[b+"ScrollbarIndicator"].style[s]="translate("+(b==="h"?c+"px,0)":"0,"+c+"px)")+t;else if(b==="h")this[b+"ScrollbarIndicator"].style.left=c+"px";else this[b+"ScrollbarIndicator"].style.top=c+"px"}},_clearSelection:function(){try{var b=null;if(g.getSelection)b=g.getSelection();else if(j.selection)b=j.selection;if(b){b.empty&&b.empty();b.removeAllRanges&&b.removeAllRanges()}}catch(a){}},
_start:function(b){var a=k?b.touches[0]:b,c,d;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);if(this.options.useTransition||this.options.zoom)this._transitionTime(0);this._clearSelection();this.zoomed=this.animating=this.moved=false;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.zoom&&k&&b.touches.length>1){d=f.abs(b.touches[0].pageX-b.touches[1].pageX);c=f.abs(b.touches[0].pageY-b.touches[1].pageY);this.touchesDistStart=
f.sqrt(d*d+c*c);this.originX=f.abs(b.touches[0].pageX+b.touches[1].pageX-this.wrapperOffsetLeft*2)/2-this.x;this.originY=f.abs(b.touches[0].pageY+b.touches[1].pageY-this.wrapperOffsetTop*2)/2-this.y;this.options.onZoomStart&&this.options.onZoomStart.call(this,b)}if(this.options.momentum){if(this.options.useTransform){c=g.getComputedStyle(this.scroller,null)[s].split(")")[0].split(", ");d=+(c[12]||c[4]);c=+(c[13]||c[5])}else if(g.getComputedStyle){d=+g.getComputedStyle(this.scroller,null).left.replace(/[^0-9\-]/g,
"");c=+g.getComputedStyle(this.scroller,null).top.replace(/[^0-9\-]/g,"")}else{d=+this.scroller.style.left.replace(/[^0-9\-]/g,"");c=+this.scroller.style.top.replace(/[^0-9\-]/g,"")}if(d!=this.x||c!=this.y){this.options.useTransition?this._unbind(v):K(this.aniTime);this.steps=[];this._pos(d,c);this.options.onScrollEnd&&this.options.onScrollEnd.call(this)}}this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;this.pointY=a.pageY;this.startTime=b.timeStamp||
C();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(y,l?j:g);this._bind(z,l?j:g);this._bind(A,l?j:g);k||this._bind("mouseout",l?j:g)}},_move:function(b){var a=k?b.touches[0]:b,c=a.pageX-this.pointX,d=a.pageY-this.pointY,e=this.x+c,h=this.y+d,i=b.timeStamp||C();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,b);this._clearSelection();if(this.options.zoom&&k&&b.touches.length>1){e=f.abs(b.touches[0].pageX-b.touches[1].pageX);h=f.abs(b.touches[0].pageY-
b.touches[1].pageY);this.touchesDist=f.sqrt(e*e+h*h);this.zoomed=true;a=1/this.touchesDistStart*this.touchesDist*this.scale;if(a<this.options.zoomMin)a=0.5*this.options.zoomMin*Math.pow(2,a/this.options.zoomMin);else if(a>this.options.zoomMax)a=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/a);this.lastScale=a/this.scale;e=this.originX-this.originX*this.lastScale+this.x;h=this.originY-this.originY*this.lastScale+this.y;this.scroller.style[s]="translate("+e+"px,"+h+"px) scale("+a+")"+t;this.options.onZoom&&
this.options.onZoom.call(this,b)}else{this.pointX=a.pageX;this.pointY=a.pageY;if(e>0||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:e>=0||this.maxScrollX>=0?0:this.maxScrollX;if(h>this.minScrollY||h<this.maxScrollY)h=this.options.bounce?this.y+d/2:h>=this.minScrollY||this.maxScrollY>=0?this.minScrollY:this.maxScrollY;this.distX+=c;this.distY+=d;this.absDistX=f.abs(this.distX);this.absDistY=f.abs(this.distY);if(!(this.absDistX<6&&this.absDistY<6)){if(this.options.lockDirection)if(this.absDistX>
this.absDistY+5){h=this.y;d=0}else if(this.absDistY>this.absDistX+5){e=this.x;c=0}this.moved=true;this._pos(e,h);this.dirX=c>0?-1:c<0?1:0;this.dirY=d>0?-1:d<0?1:0;if(i-this.startTime>300){this.startTime=i;this.startX=this.x;this.startY=this.y}this.options.onScrollMove&&this.options.onScrollMove.call(this,b)}}},_end:function(b){if(!(k&&b.touches.length!==0)){var a=this,c=k?b.changedTouches[0]:b,d,e,h={dist:0,time:0},i={dist:0,time:0},n=(b.timeStamp||C())-a.startTime,m=a.x,q=a.y;a._unbind(y,l?j:g);
a._unbind(z,l?j:g);a._unbind(A,l?j:g);k||a._unbind("mouseout",l?j:g);a.options.onBeforeScrollEnd&&a.options.onBeforeScrollEnd.call(a,b);if(a.zoomed){m=a.scale*a.lastScale;m=Math.max(a.options.zoomMin,m);m=Math.min(a.options.zoomMax,m);a.lastScale=m/a.scale;a.scale=m;a.x=a.originX-a.originX*a.lastScale+a.x;a.y=a.originY-a.originY*a.lastScale+a.y;a.scroller.style[u]="200ms";a.scroller.style[s]="translate("+a.x+"px,"+a.y+"px) scale("+a.scale+")"+t;a.zoomed=false;a.refresh();a.options.onZoomEnd&&a.options.onZoomEnd.call(a,
b)}else{if(a.moved){if(n<300&&a.options.momentum){h=m?a._momentum(m-a.startX,n,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):h;i=q?a._momentum(q-a.startY,n,-a.y,a.maxScrollY<0?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):i;m=a.x+h.dist;q=a.y+i.dist;if(a.x>0&&m>0||a.x<a.maxScrollX&&m<a.maxScrollX)h={dist:0,time:0};if(a.y>a.minScrollY&&q>a.minScrollY||a.y<a.maxScrollY&&q<a.maxScrollY)i={dist:0,time:0}}if(h.dist||i.dist){h=f.max(f.max(h.time,i.time),10);if(a.options.snap){i=
m-a.absStartX;n=q-a.absStartY;if(f.abs(i)<a.options.snapThreshold&&f.abs(n)<a.options.snapThreshold)a.scrollTo(a.absStartX,a.absStartY,200);else{i=a._snap(m,q);m=i.x;q=i.y;h=f.max(i.time,h)}}a.scrollTo(f.round(m),f.round(q),h)}else if(a.options.snap){i=m-a.absStartX;n=q-a.absStartY;if(f.abs(i)<a.options.snapThreshold&&f.abs(n)<a.options.snapThreshold)a.scrollTo(a.absStartX,a.absStartY,200);else{i=a._snap(a.x,a.y);if(i.x!=a.x||i.y!=a.y)a.scrollTo(i.x,i.y,i.time)}}else a._resetPos(200)}else{if(k)if(a.doubleTapTimer&&
a.options.zoom){clearTimeout(a.doubleTapTimer);a.doubleTapTimer=null;a.options.onZoomStart&&a.options.onZoomStart.call(a,b);a.zoom(a.pointX,a.pointY,a.scale==1?a.options.doubleTapZoom:1);a.options.onZoomEnd&&setTimeout(function(){a.options.onZoomEnd.call(a,b)},200)}else if(a.options.handleClick)a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;for(d=c.target;d&&d.nodeType!==1;)d=d.parentNode;if(d&&d.tagName!=="SELECT"&&d.tagName!=="INPUT"&&d.tagName!=="TEXTAREA"){e=j.createEvent("MouseEvents");
e.initMouseEvent("click",true,true,b.view,1,c.screenX,c.screenY,c.clientX,c.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);e._fake=true;d.dispatchEvent(e)}},a.options.zoom?250:0);a._resetPos(400)}a.options.onTouchEnd&&a.options.onTouchEnd.call(a,b)}}},_resetPos:function(b){var a=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||this.maxScrollY>0?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(a==this.x&&c==this.y){if(this.moved){this.moved=
false;this.options.onScrollEnd&&this.options.onScrollEnd.call(this)}if(this.hScrollbar&&this.options.hideScrollbar){if(p==="webkit")this.hScrollbarWrapper.style[E]="300ms";this.hScrollbarWrapper.style.opacity="0"}if(this.vScrollbar&&this.options.hideScrollbar){if(p==="webkit")this.vScrollbarWrapper.style[E]="300ms";this.vScrollbarWrapper.style.opacity="0"}}else this.scrollTo(a,c,b||0)},_wheel:function(b){var a=this,c,d;if("wheelDeltaX"in b){c=b.wheelDeltaX/12;d=b.wheelDeltaY/12}else if("wheelDelta"in
b)c=d=b.wheelDelta/12;else if("detail"in b)c=d=-b.detail*3;else return;if(a.options.wheelAction==="zoom"){d=a.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0));if(d<a.options.zoomMin)d=a.options.zoomMin;if(d>a.options.zoomMax)d=a.options.zoomMax;if(d!=a.scale){!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,b);a.wheelZoomCount++;b.stopPropagation();b.preventDefault();a.zoom(b.pageX,b.pageY,d,400);setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,
b)},400)}}else{c=a.x+c/10*a.options.wheelDeltaX;d=a.y+d/10*a.options.wheelDeltaY;if(c>0)c=0;else if(c<a.maxScrollX)c=a.maxScrollX;if(d>a.minScrollY)d=a.minScrollY;else if(d<a.maxScrollY)d=a.maxScrollY;if(a.maxScrollY<0){a.scrollTo(c,d,0);if(a.x!==0&&a.x!==a.maxScrollX||a.y!==a.minScrollY&&a.y!==a.maxScrollY){b.stopPropagation();b.preventDefault()}}}},_transitionEnd:function(b){if(b.target===this.scroller){this._unbind(v);this._startAni()}},_startAni:function(){var b=this,a=b.x,c=b.y,d=C(),e,h,i;if(!b.animating)if(b.steps.length){e=
b.steps.shift();if(e.x==a&&e.y==c)e.time=0;b.animating=true;b.moved=true;if(b.options.useTransition){b._transitionTime(e.time);b._pos(e.x,e.y);b.animating=false;e.time?b._bind(v):b._resetPos(0)}else{i=function(){var n=C();if(n>=d+e.time){b._pos(e.x,e.y);b.animating=false;b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b);b._startAni()}else{n=(n-d)/e.time-1;h=f.sqrt(1-n*n);n=(e.x-a)*h+a;b._pos(n,(e.y-c)*h+c);if(b.animating)b.aniTime=P(i)}};i()}}else b._resetPos(400)},_transitionTime:function(b){b+=
"ms";this.scroller.style[u]=b;if(this.hScrollbar)this.hScrollbarIndicator.style[u]=b;if(this.vScrollbar)this.vScrollbarIndicator.style[u]=b},_momentum:function(b,a,c,d,e){a=f.abs(b)/a;var h=a*a/0.0012;if(b>0&&h>c){c+=e/(6/(h/a*6.0E-4));a=a*c/h;h=c}else if(b<0&&h>d){d+=e/(6/(h/a*6.0E-4));a=a*d/h;h=d}h*=b<0?-1:1;return{dist:h,time:f.round(a/6.0E-4)}},_offset:function(b){for(var a=-b.offsetLeft,c=-b.offsetTop;b=b.offsetParent;){a-=b.offsetLeft;c-=b.offsetTop}if(b!==this.wrapper){a*=this.scale;c*=this.scale}return{left:a,
top:c}},_snap:function(b,a){var c,d,e;e=this.pagesX.length-1;c=0;for(d=this.pagesX.length;c<d;c++)if(b>=this.pagesX[c]){e=c;break}e==this.currPageX&&e>0&&this.dirX<0&&e--;b=this.pagesX[e];d=(d=f.abs(b-this.pagesX[this.currPageX]))?f.abs(this.x-b)/d*500:0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;c++)if(a>=this.pagesY[c]){e=c;break}e==this.currPageY&&e>0&&this.dirY<0&&e--;a=this.pagesY[e];c=(c=f.abs(a-this.pagesY[this.currPageY]))?f.abs(this.y-a)/c*500:0;this.currPageY=e;e=f.round(f.max(d,
c))||200;return{x:b,y:a,time:e}},_bind:function(b,a,c,d){a=a||this.scroller;c=!!c;if("addEventListener"in a)a.addEventListener(b,d||this._handleEventWithContext,c);else if("attachEvent"in a)a.attachEvent("on"+b,d||this._handleEventWithContext)},_unbind:function(b,a,c,d){a=a||this.scroller;c=!!c;if("removeEventListener"in a)a.removeEventListener(b,d||this._handleEventWithContext,c);else if("detachEvent"in a)a.detachEvent("on"+b,d||this._handleEventWithContext)},destroy:function(){this.vScrollbar=this.hScrollbar=
false;this._scrollbar("h");this._scrollbar("v");this._unbind(G,g);if(this.options.handleDrag){this._unbind(w,this.wrapper,undefined,this._preventSelectionScrollHandler);this._unbind(w);this._unbind("selectstart");this._unbind("dragstart")}this._unbind(y,l?j:g);this._unbind(z,l?j:g);this._unbind(A,l?j:g);if(!k){this._unbind("mouseout",l?j:g);this._unbind(B)}this.options.useTransition&&this._unbind(v);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.scroller.style.cssText=this._scrollerCssInitial;
this.wrapper.style.cssText=this._wrapperCssInitial;this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b,a,c,d=0;a=0;if(this.scale<this.options.zoomMin)this.scale=this.options.zoomMin;this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=f.round(this.scroller.offsetWidth*this.scale);this.scrollerH=f.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-
this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=
-b.left;this.wrapperOffsetTop=-b.top;if(typeof this.options.snap==="string"){this.pagesX=[];this.pagesY=[];c=this.scroller.querySelectorAll(this.options.snap);b=0;for(a=c.length;b<a;b++){d=this._offset(c[b]);d.left+=this.wrapperOffsetLeft;d.top+=this.wrapperOffsetTop;this.pagesX[b]=d.left<this.maxScrollX?this.maxScrollX:d.left*this.scale;this.pagesY[b]=d.top<this.maxScrollY?this.maxScrollY:d.top*this.scale}}else if(this.options.snap){for(this.pagesX=[];d>=this.maxScrollX;){this.pagesX[a]=d;d-=this.wrapperW;
a++}if(this.maxScrollX%this.wrapperW)this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1];a=d=0;for(this.pagesY=[];d>=this.maxScrollY;){this.pagesY[a]=d;d-=this.wrapperH;a++}if(this.maxScrollY%this.wrapperH)this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1]}this._scrollbar("h");this._scrollbar("v");this.options.onAfterRefresh&&this.options.onAfterRefresh.call(this);if(!this.zoomed){this.scroller.style[u]=
"0";this._resetPos(400)}},scrollTo:function(b,a,c,d){var e=b;this.stop();if(!e.length){b=b>=0?0:b<this.maxScrollX?this.maxScrollX:b;a=a>=this.minScrollY||this.maxScrollY>0?this.minScrollY:a<this.maxScrollY?this.maxScrollY:a;e=[{x:b,y:a,time:c,relative:d}]}b=0;for(a=e.length;b<a;b++){if(e[b].relative){e[b].x=this.x-e[b].x;e[b].y=this.y-e[b].y}this.steps.push({x:e[b].x,y:e[b].y,time:e[b].time||0})}this._startAni()},scrollToElement:function(b,a){var c;if(b=b.nodeType?b:this.scroller.querySelector(b)){c=
this._offset(b);c.left+=this.wrapperOffsetLeft;c.top+=this.wrapperOffsetTop;c.left=c.left>0?0:c.left<this.maxScrollX?this.maxScrollX:c.left;c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top;a=a===undefined?f.max(f.abs(c.left)*2,f.abs(c.top)*2):a;this.scrollTo(c.left,c.top,a)}},scrollToPage:function(b,a,c){c=c===undefined?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap){b=b==="next"?this.currPageX+1:b==="prev"?this.currPageX-
1:b;a=a==="next"?this.currPageY+1:a==="prev"?this.currPageY-1:a;b=b<0?0:b>this.pagesX.length-1?this.pagesX.length-1:b;a=a<0?0:a>this.pagesY.length-1?this.pagesY.length-1:a;this.currPageX=b;this.currPageY=a;b=this.pagesX[b];a=this.pagesY[a]}else{b*=-this.wrapperW;a*=-this.wrapperH;if(b<this.maxScrollX)b=this.maxScrollX;if(a<this.maxScrollY)a=this.maxScrollY}this.scrollTo(b,a,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(y,l?j:g);this._unbind(z,l?j:g);this._unbind(A,
l?j:g);this._unbind("mouseout",l?j:g)},enable:function(){this.enabled=true},stop:function(){this.options.useTransition?this._unbind(v):K(this.aniTime);this.steps=[];this.animating=this.moved=false},zoom:function(b,a,c,d){var e=c/this.scale;if(this.options.useTransform){this.zoomed=true;d=d===undefined?200:d;b=b-this.wrapperOffsetLeft-this.x;a=a-this.wrapperOffsetTop-this.y;this.x=b-b*e+this.x;this.y=a-a*e+this.y;this.scale=c;this.refresh();this.x=this.x>0?0:this.x<this.maxScrollX?this.maxScrollX:
this.x;this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;this.scroller.style[u]=d+"ms";this.scroller.style[s]="translate("+this.x+"px,"+this.y+"px) scale("+c+")"+t;this.zoomed=false}},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};D=null;if(typeof exports!=="undefined")exports.iScroll=x;else g.iScroll=x})(window,document);