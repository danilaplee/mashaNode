/*!
 * @license Input Mask plugin for jquery
 * http://github.com/RobinHerbots/jquery.inputmask
 * Copyright (c) 2010 - 2012 Robin Herbots
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * Version: 1.0.21
 */
(function(k){Array.prototype.indexOf=Array.prototype.indexOf||function(H,O){for(var I=O||0;I<this.length;I++)if(this[I]==H)return I;return-1};if(k.fn.inputmask==undefined){k.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:null,onincomplete:null,oncleared:null,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:k.noop,onKeyDown:k.noop,numericInput:false,radixPoint:".",definitions:{"9":{validator:"[0-9]",
cardinality:1},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451]",cardinality:1},"*":{validator:"[A-Za-z\u0410-\u044f\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,
TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:k.fn.val};k.fn.inputmask=function(H,O){function I(d){if(d=c.aliases[d]){d.alias&&I(d.alias);k.extend(true,c,d);k.extend(true,c,O);return true}return false}function Q(){var d=false,e=0;if(c.mask.length==1&&c.greedy==false)c.placeholder="";for(var h=k.map(c.mask.split(""),function(m){var b=[];if(m==c.escapeChar)d=true;else if(m!=c.optionalmarker.start&&m!=c.optionalmarker.end||d){var r=c.definitions[m];
if(r&&!d)for(m=0;m<r.cardinality;m++)b.push(D(e+m));else{b.push(m);d=false}e+=b.length;return b}}),j=h.slice(),l=1;l<c.repeat&&c.greedy;l++)j=j.concat(h.slice());return j}function R(){var d=false,e=false,h=false;return k.map(c.mask.split(""),function(j){var l=[];if(j==c.escapeChar)e=true;else if(j==c.optionalmarker.start&&!e)h=d=true;else if(j==c.optionalmarker.end&&!e){d=false;h=true}else{var m=c.definitions[j];if(m&&!e){for(var b=m.prevalidator,r=b?b.length:0,s=1;s<m.cardinality;s++){var w=r>=s?
b[s-1]:[],v=w.validator;w=w.cardinality;l.push({fn:v?typeof v=="string"?RegExp(v):new function(){this.test=v}:/./,cardinality:w?w:1,optionality:d,newBlockMarker:d==true?h:false,offset:0,casing:m.casing,def:j});if(d==true)h=false}l.push({fn:m.validator?typeof m.validator=="string"?RegExp(m.validator):new function(){this.test=m.validator}:/./,cardinality:m.cardinality,optionality:d,newBlockMarker:h,offset:0,casing:m.casing,def:j})}else{l.push({fn:null,cardinality:0,optionality:d,newBlockMarker:h,offset:0,
casing:null,def:j});e=false}h=false;return l}})}function K(d,e,h,j){if(d<0||d>=t())return false;for(var l=d%q.length,m=e?1:0,b="",r=q[l].cardinality;r>m;r--)b+=y(h,l-(r-1));if(e)b+=e;return q[l].fn!=null?q[l].fn.test(b,h,d,j,c):false}function z(d){d=q[d%q.length];return d!=undefined?d.fn:false}function D(d){return c.placeholder.charAt(d%c.placeholder.length)}function t(){var d=o.length;if(!c.greedy&&c.repeat>1)d+=o.length*(c.repeat-1);return d}function A(d,e){var h=t();if(e>=h)return h;for(var j=
e;++j<h&&!z(j););return j}function L(d,e){var h=e;if(h<=0)return 0;for(;--h>0&&!z(h););return h}function J(d,e,h){var j=h;switch(q[e%q.length].casing){case "upper":j=h.toUpperCase();break;case "lower":j=h.toLowerCase()}d[e]=j}function y(d,e,h){if(h)e=S(d,e);return d[e]}function S(d,e,h){if(h)for(;e<0&&d.length<t();){h=o.length-1;for(e=o.length;o[h]!==undefined;)d.unshift(o[h--])}else for(;d[e]==undefined&&d.length<t();)for(h=0;o[h]!==undefined;)d.push(o[h++]);return e}function B(d,e,h){d._valueGet()!==
e.join("")&&d._valueSet(e.join(""));if(h!=undefined)M?setTimeout(function(){u(d,h)},100):u(d,h)}function T(d,e,h){for(var j=t();e<h&&e<j;e++)J(d,e,y(o.slice(),e))}function N(d,e){J(d,e,y(o,e%q.length))}function E(d,e,h,j){var l=k(d).data("inputmask");l=l&&l.isRTL;var m=P(d._valueGet(),l).split("");if(l){var b=t(),r=m.reverse();r.length=b;for(var s=0;s<b;s++){var w=(b-(s+1))%q.length;if(q[w].fn==null&&r[s]!=y(o,w)){r.splice(s,0,y(o,w));r.length=b}else r[s]=r[s]||y(o,w)}m=r.reverse()}T(e,0,e.length);
e.length=o.length;var v=r=-1,C;b=t();var x=m.length;w=x==0?b:-1;for(s=0;s<x;s++)for(var a=v+1;a<b;a++)if(z(a)){var g=m[s];if((C=K(a,g,e,!h))!==false){if(C!==true){a=C.pos||a;g=C.c||g}J(e,a,g);r=v=a}else{N(e,a);if(g==D(a))w=v=a}break}else{N(e,a);if(r==v)r=a;v=a;if(m[s]==y(e,a))break}if(c.greedy==false)for(s=P(e.join(""),l).split("");e.length!=s.length;)l?e.shift():e.pop();h&&B(d,e);return l?c.numericInput?e.indexOf(c.radixPoint)!=-1&&j!==true?e.indexOf(c.radixPoint):A(e,b):A(e,w):A(e,r)}function W(d){return d.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)",
"gim"),"\\$1")}function P(d,e){return e?d.replace(RegExp("^("+W(o.join(""))+")*"),""):d.replace(RegExp("("+W(o.join(""))+")*$"),"")}function X(d,e){E(d,e,false);var h=e.slice(),j=k(d).data("inputmask");if(j&&j.isRTL)for(j=0;j<=h.length-1;j++){var l=j%q.length;if(q[l].optionality)if(D(j)==e[j]||!z(j))h.splice(0,1);else break;else break}else for(j=h.length-1;j>=0;j--){l=j%q.length;if(q[l].optionality)if(D(j)==e[j]||!z(j))h.pop();else break;else break}B(d,h)}function Y(d,e){var h=d[0];if(q&&(e===true||
!d.hasClass("hasDatepicker"))){var j=o.slice();E(h,j);return k.map(j,function(l,m){return z(m)&&l!=y(o.slice(),m)?l:null}).join("")}else return h._valueGet()}function u(d,e,h){d=d.jquery&&d.length>0?d[0]:d;if(typeof e=="number"){h=typeof h=="number"?h:e;c.insertMode==false&&e==h&&h++;if(d.setSelectionRange)d.setSelectionRange(e,h);else if(d.createTextRange){var j=d.createTextRange();j.collapse(true);j.moveEnd("character",h);j.moveStart("character",e);j.select()}d.focus();if(M&&h!=d.selectionEnd)U=
{begin:e,end:h}}else{j=M?U:null;U=null;if(j==null){if(d.setSelectionRange){e=d.selectionStart;h=d.selectionEnd}else if(document.selection&&document.selection.createRange){j=document.selection.createRange();e=0-j.duplicate().moveStart("character",-1E5);h=e+j.text.length}j={begin:e,end:h}}return j}}function V(d){function e(a){var g=true;a=a._valueGet();for(var f=a.length,i=0;i<f;i++)if(z(i)&&a.charAt(i)==D(i)){g=false;break}return g}function h(a,g,f){for(;!z(a)&&a-1>=0;)a--;for(var i=a;i<g&&i<t();i++)if(z(i)){N(b,
i);var n=A(b,i),p=y(b,n);if(p!=D(n))if(n<t()&&K(i,p,b,true)!==false&&q[i%q.length].def==q[n%q.length].def){J(b,i,y(b,n));N(b,n)}else{if(z(i))break}else if(f==undefined)break}else N(b,i);if(f!=undefined)J(b,x?g:L(b,g),f);b=P(b.join(""),x).split("");if(b.length==0)b=o.slice();return a}function j(a,g,f,i){for(;a<=g&&a<t();a++)if(z(a)){var n=y(b,a);J(b,a,f);if(n!=D(a)){f=A(b,a);if(f<t())if(K(f,n,b,true)!==false&&q[a%q.length].def==q[f%q.length].def)f=n;else if(z(f))break;else f=n;else break}else if(i!==
true)break}else N(b,a);i=b.length;b=P(b.join(""),x).split("");if(b.length==0)b=o.slice();return g-(i-b.length)}var l=k(d);if(l.is(":input")){var m=l.prop("maxLength");if(t()>m&&m>-1){if(m<o.length)o.length=m;if(c.greedy==false)c.repeat=Math.round(m/o.length)}l.prop("maxLength",t()*2);l.data("inputmask",{tests:q,_buffer:o,greedy:c.greedy,repeat:c.repeat,autoUnmask:c.autoUnmask,definitions:c.definitions,isRTL:false});(function(a){var g;if(Object.getOwnPropertyDescriptor)g=Object.getOwnPropertyDescriptor(a,
"value");if(g&&g.get){if(!a._valueGet){a._valueGet=g.get;a._valueSet=g.set;Object.defineProperty(a,"value",{get:function(){var f=k(this),i=k(this).data("inputmask");return i&&i.autoUnmask?f.inputmask("unmaskedvalue"):i&&this._valueGet()!=i._buffer.join("")?this._valueGet():""},set:function(f){this._valueSet(f);k(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&a.__lookupGetter__("value")){if(!a._valueGet){a._valueGet=a.__lookupGetter__("value");a._valueSet=a.__lookupSetter__("value");
a.__defineGetter__("value",function(){var f=k(this),i=k(this).data("inputmask");return i&&i.autoUnmask?f.inputmask("unmaskedvalue"):i&&this._valueGet()!=i._buffer.join("")?this._valueGet():""});a.__defineSetter__("value",function(f){this._valueSet(f);k(this).triggerHandler("setvalue.inputmask")})}}else{if(!a._valueGet){a._valueGet=function(){return this.value};a._valueSet=function(f){this.value=f}}if(k.fn.val.inputmaskpatch!=true){k.fn.val=function(){if(arguments.length==0){var f=k(this),i=f.data("inputmask");
if(i)if(i.autoUnmask)return f.inputmask("unmaskedvalue");else{f=k.inputmask.val.apply(f);return f!=i._buffer.join("")?f:""}else return k.inputmask.val.apply(f)}else{var n=arguments;return this.each(function(){var p=k(this),F=k.inputmask.val.apply(p,n);p.data("inputmask")&&p.triggerHandler("setvalue.inputmask");return F})}};k.extend(k.fn.val,{inputmaskpatch:true})}}})(d);var b=o.slice(),r=d._valueGet(),s=false,w=false,v=-1,C=A(b,-1);L(b,t());var x=false;if(d.dir=="rtl"||c.numericInput){d.dir="ltr";
l.css("text-align","right");l.removeAttr("dir");if(m=l.data("inputmask")){m.isRTL=true;l.data("inputmask",m)}x=true}l.unbind(".inputmask");l.removeClass("focus.inputmask");l.bind("mouseenter.inputmask",function(){if(!k(this).hasClass("focus.inputmask")){var a=this._valueGet().length;if(a==0){b=o.slice();B(this,b)}else a<b.length&&B(this,b)}}).bind("blur.inputmask",function(){var a=k(this),g=this._valueGet();a.removeClass("focus.inputmask");g!=r&&a.change();if(c.clearMaskOnLostFocus)g==o.join("")?
this._valueSet(""):X(this,b);if((c.clearIncomplete||c.onincomplete)&&!e(this)){c.onincomplete&&c.onincomplete.call(this);if(c.clearIncomplete)if(c.clearMaskOnLostFocus)this._valueSet("");else{b=o.slice();B(this,b)}}}).bind("focus.inputmask",function(){k(this).addClass("focus.inputmask");r=this._valueGet()}).bind("mouseleave.inputmask",function(){var a=k(this);if(c.clearMaskOnLostFocus)a.hasClass("focus.inputmask")||(this._valueGet()==o.join("")?this._valueSet(""):X(this,b))}).bind("click.inputmask",
function(){var a=this;setTimeout(function(){var g=u(a);if(g.begin==g.end){g=g.begin;v=E(a,b,false);x?u(a,g>v&&(K(g,b[g],b,true)!==false||!z(g))?g:v):u(a,g<v&&(K(g,b[g],b,true)!==false||!z(g))?g:v)}},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){u(a,0,v)},0)}).bind("keydown.inputmask",function(a){s=false;var g=this,f=a.keyCode,i=u(g);if(c.numericInput){var n=g._valueGet().indexOf(c.radixPoint);if(n!=-1)x=i.begin<=n||i.end<=n}if(f==c.keyCode.BACKSPACE||f==c.keyCode.DELETE||
Z&&f==127){n=t();if(i.begin==0&&i.end==n){b=o.slice();B(g,b);u(g,E(g,b,false))}else if(i.end-i.begin>1||i.end-i.begin==1&&c.insertMode){T(b,i.begin,i.end);B(g,b,x?E(g,b,false):i.begin)}else{var p=i.begin-(f==c.keyCode.DELETE?0:1);if(p<C&&f==c.keyCode.DELETE)p=C;if(p>=C){if(c.numericInput&&c.greedy&&f==c.keyCode.DELETE&&b[p]==c.radixPoint){p=A(b,p);x=false}if(x){p=j(C,p,D(p),true);p=c.numericInput&&c.greedy&&f==c.keyCode.BACKSPACE&&b[p+1]==c.radixPoint?p+1:A(b,p)}else p=h(p,n);B(g,b,p)}}c.oncleared&&
g._valueGet()==o.join("")&&c.oncleared.call(g);return false}else if(f==c.keyCode.END||f==c.keyCode.PAGE_DOWN){setTimeout(function(){var F=E(g,b,false,true);!c.insertMode&&F==t()&&!a.shiftKey&&F--;u(g,a.shiftKey?i.begin:F,F)},0);return false}else if(f==c.keyCode.HOME||f==c.keyCode.PAGE_UP){u(g,0,a.shiftKey?i.begin:0);return false}else if(f==c.keyCode.ESCAPE){g._valueSet(r);u(g,0,E(g,b));return false}else if(f==c.keyCode.INSERT){c.insertMode=!c.insertMode;u(g,!c.insertMode&&i.begin==t()?i.begin-1:i.begin);
return false}else if(a.ctrlKey&&f==88)setTimeout(function(){u(g,E(g,b,true))},0);else if(!c.insertMode)if(f==c.keyCode.RIGHT){f=i.begin==i.end?i.end+1:i.end;f=f<t()?f:i.end;u(g,a.shiftKey?i.begin:f,a.shiftKey?f+1:f);return false}else if(f==c.keyCode.LEFT){f=i.begin-1;f=f>0?f:0;u(g,f,a.shiftKey?i.end:f);return false}c.onKeyDown.call(this,a,c);w=k.inArray(f,c.ignorables)!=-1}).bind("keypress.inputmask",function(a){if(s)return false;s=true;a=a||window.event;var g=a.which||a.charCode||a.keyCode;if(c.numericInput&&
g==c.radixPoint.charCodeAt(c.radixPoint.length-1)){var f=this._valueGet().indexOf(c.radixPoint);u(this,A(b,f!=-1?f:t()))}if(a.ctrlKey||a.altKey||a.metaKey||w)return true;else if(g){a=u(this);g=String.fromCharCode(g);var i=t();T(b,a.begin,a.end);if(x){f=c.numericInput?a.end:L(b,a.end);var n;if((n=K(f==i||y(b,f)==c.radixPoint?L(b,f):f,g,b,false))!==false){if(n!==true){f=n.pos||a;g=n.c||g}n=C;if(c.insertMode==true){if(c.greedy==true)for(var p=b.slice();y(p,n,true)!=D(n)&&n<=f;)n=A(b,n);if(n<=f&&(c.greedy||
b.length<i)){if(b[C]!=D(C)&&b.length<i){i=S(b,-1,x);if(a.end!=0)f+=i}h(n,c.numericInput?L(b,f):f,g)}else return false}else J(b,c.numericInput?L(b,f):f,g);B(this,b,c.numericInput&&f==0?A(b,f):f);c.oncomplete&&e(this)&&c.oncomplete.call(this)}else M&&B(this,b,a.begin)}else{f=A(b,a.begin-1);S(b,f,x);if((n=K(f,g,b,false))!==false){if(n!==true){f=n.pos||f;g=n.c||g}if(c.insertMode==true){a=t();for(p=b.slice();y(p,a,true)!=D(a)&&a>=f;)a=a==0?-1:L(b,a);if(a>=f)j(f,b.length,g);else return false}else J(b,f,
g);a=A(b,f);B(this,b,a);c.oncomplete&&e(this)&&c.oncomplete.call(this)}else M&&B(this,b,a.begin)}return false}}).bind("keyup.inputmask",function(a){var g=k(this),f=a.keyCode;c.onKeyUp.call(this,a,c);if(f==c.keyCode.TAB&&g.hasClass("focus.inputmask")&&this._valueGet().length==0){b=o.slice();B(this,b);x||u(this,0);r=this._valueGet()}}).bind("paste.inputmask",function(){var a=this;setTimeout(function(){u(a,E(a,b,true))},0)}).bind("setvalue.inputmask",function(){r=this._valueGet();E(this,b,true);c.clearMaskOnLostFocus&&
this._valueGet()==o.join("")&&this._valueSet("")});v=E(d,b,true);if(document.activeElement===d){l.addClass("focus.inputmask");u(d,v)}else c.clearMaskOnLostFocus&&d._valueGet()==o.join("")&&d._valueSet("");(function(a){var g=k._data(a).events;k.each(g,function(f,i){k(a).bind(f+".inputmask",function(F){if(this.readOnly||this.disabled){F.stopPropagation();F.stopImmediatePropagation();F.preventDefault();return false}});for(var n=i[i.length-1],p=i.length-1;p>0;p--)i[p]=i[p-1];i[0]=n})})(d)}}var c=k.extend(true,
{},k.inputmask.defaults,O),Z=navigator.userAgent.match(/iphone/i)!=null,M=navigator.userAgent.match(/android.*mobile safari.*/i)!=null;if(M){var G=navigator.userAgent.match(/mobile safari.*/i);M=parseInt(RegExp(/[0-9]+/).exec(G))<=533}var U=null;G=this.data("inputmask");var q,o;if(typeof H=="string")switch(H){case "mask":o=Q();q=R();return this.each(function(){V(this)});case "unmaskedvalue":q=G.tests;o=G._buffer;c.greedy=G.greedy;c.repeat=G.repeat;c.definitions=G.definitions;return Y(this);case "remove":return this.each(function(){var d=
k(this),e=this;setTimeout(function(){var h=d.data("inputmask");if(h){c.greedy=h.greedy;c.repeat=h.repeat;c.definitions=h.definitions;e._valueSet(Y(d,true));d.removeData("inputmask");d.unbind(".inputmask");d.removeClass("focus.inputmask");var j;if(Object.getOwnPropertyDescriptor)j=Object.getOwnPropertyDescriptor(e,"value");if(j&&j.get)e._valueGet&&Object.defineProperty(e,"value",{get:e._valueGet,set:e._valueSet});else if(document.__lookupGetter__&&e.__lookupGetter__("value"))if(e._valueGet){e.__defineGetter__("value",
e._valueGet);e.__defineSetter__("value",e._valueSet)}delete e._valueGet;delete e._valueSet}},0)});case "getemptymask":return G?G._buffer.join(""):"";default:if(!I(H))c.mask=H;o=Q();q=R();return this.each(function(){V(this)})}if(typeof H=="object"){c=k.extend(true,{},k.inputmask.defaults,H);I(c.alias);o=Q();q=R();return this.each(function(){V(this)})}}}})(jQuery);